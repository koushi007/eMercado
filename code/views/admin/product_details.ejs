<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/forms.css">
<link rel="stylesheet" href="/css/product.css">
</head>

<body>


<main>

    <%var latitude = product_lat ;%>
    <%var longitude = product_lng ;%>
        <div id="map" m class="vertical-center"></div>
        <script>
            function initMap() {
                var place = {
                    lat: <%=latitude%>,
                    lng: <%=longitude%>
                };
                var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 7,
                    center: place
                });
                var marker = new google.maps.Marker({
                    position: place,
                    map: map
                });
            }
        </script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=
AIzaSyB2bXKNDezDf6YNVc-SauobynNHPo4RJb8&callback=initMap">
        </script>



    <h1>Direct Sale Product Details Page</h1>



    <h3> <b>Product Name:&nbsp;</b>
        <tt><%=product_name%></tt>
    </h3>


    <h3> <b>Product Description:&nbsp;</b>
        <tt><%=product_description%></tt>
    </h3>

    

  

    <h3> <b>Product id:&nbsp;</b>
        <tt><%=product_id%></tt>
    </h3>


    <h3> <b>Sale type:&nbsp;</b>
        <tt><%=product_type%></tt>
    </h3>


    <h3> <b>Price:&nbsp;</b>
        <tt><%=product_price%></tt>
    </h3>

  

    <h3> <b>Status:&nbsp;</b>
        <tt><%=product_status%></tt>
    </h3>

    <h3> <b>seller ID:&nbsp;</b>
        <tt><%=product_seller%></tt>
    </h3>

    <h3> <b>delivery distance:&nbsp;</b>
        <tt><%=product_distance%> km</tt>
    </h3>
    <h3> <b>delivery charges:&nbsp;</b>
        <tt>&dollar;<%=product_delivery_cost%></tt>
    </h3>

    <h3> <b>total cost:&nbsp;</b>
        <tt>&dollar;<%=product_amount_to_pay%></tt>
    </h3>



    <% if (product_viewer == "buyer")  {%>

            <% if (product_status == "open")  {%>

            <form action="http://localhost:3000/product-details-buy" method="post">
                <button type="submit">Buy</button>
                <input type="hidden" name="product_id" value= <%=product_id %>>
                <input type="hidden" name="product_type" value= <%=product_type %>>
                        
            </form>

            <% } %>


            <% if (product_status == "out-for-delivery")  {%>

                <form action="http://localhost:3000/product-details-confirm-delivery" method="post">
                    <button type="submit">Confirm Delivery</button>
                    <input type="hidden" name="product_id" value= <%=product_id %>>
                    <input type="hidden" name="product_type" value= <%=product_type %>>
                            
                </form>
            
                <% } %>


                

    <% } %>






    <% if (product_viewer == "seller")  {%>


        <% if (product_status == "open")  {%>

            <form action="http://localhost:3000/product-details-delete-product" method="post">
                <button type="submit">Delete Product</button>
                <input type="hidden" name="product_id" value= <%=product_id %>>
                <input type="hidden" name="product_type" value= <%=product_type %>>
                        
            </form>

            <% } %>

            <% if (product_status != "open"  && product_status!= "delivered" &&  product_status!= "out-for-delivery" )  {%>

            <form action="http://localhost:3000/product-details-update-status" method="post">
                <button type="submit">Update Status to <%=product_new_status%> </button>
                <input type="hidden" name="product_id" value= <%=product_id %>>
                <input type="hidden" name="product_type" value= <%=product_type %>>
                        
            </form>

            <% } %>




       


    <% } %>




    


    <form action="http://localhost:3000/logout" method="post">
        <button type="submit">Logout</button>
    </form>

   
</main>
<%- include('../includes/end.ejs') %>